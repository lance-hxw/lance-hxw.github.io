其核心是一个EventLoop
- 每个命令本身是原子的
- 单线程不断从事件队列中取出并执行客户端请求
这样你在业务层的连续多个redis操作就不是原子的，就需要你传一个lua脚本过来一次性执行。

# redis原子执行方法

## lua 脚本

## redis事务（multi / exec）
缺点：
- 只能执行一组静态命令，无法实现“查询，按条件修改”的逻辑
- 反而lua支持逻辑，循环
- 事务需要多次网络请求，lua直接把逻辑传过来了

## 管道 pipeline

## 原子命令，如INCR，DECR，SETNX

## 乐观锁 WATCH
结合redis事务，watch如果变化，就回滚事务