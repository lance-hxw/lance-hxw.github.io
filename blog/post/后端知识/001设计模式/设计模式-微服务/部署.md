# sidecar
在同一个主机/pod中,将辅助功能, 如日志,配置,服务发现等, 抽象成sidecar容器或轻量级线程
- sidecar提供辅助功能
- 与服务通过localhost或者共享文件系统进行紧耦合通信
## 功能
- 服务发现的功能, 即使用边车进行注册注销和后续连接
- 配置管理, 从配置中心拉取热加载
- 日志和指标
- 安全, mTLS, 进行tls握手, 加密认证等
- 流量管理和控制策略
- 轻量级代理和网关,实现协议转换和路由等
## 优点
- 解耦合:
	- 将通用基础设施从业务进程中剥离, 业务代码更关注核心
	- 可以独立升级, 选型自由
	- 可以复用sidecar
	- 演进无侵入
	- 一致性与可观测性
## 实现方式
在k8s中可以:
- Pod Spec中直接定义, 在spec.containers中添加多个容器
- Admission Controller 自动注入
	- 在Pod创建时自动插入sidcar, 不需要改容器模板

# Ambassador模式
使用一个代理容器作为微服务通讯门面, 与外界交互

# Adapter
对遗留系统和第三方系统提供适配器服务

# Strangler Fig: 扼杀, 藤蔓
从单体应用转换成微服务, "攀枝"完成替换

# anti-corruption
防腐层, 隔断并兼容新老系统的通讯
# 蓝绿部署
同时运行两个环境, 流量切换不宕机

# 金丝雀发布(canary)
将新版本只对部分流量发布, 验证后全量发布
