# 纯消费端手段

最朴素的是优化代码, 用多线程等手段加速消费, 但可能太慢, 而且提升不大

最朴素的还是水平拓展, 但是有的不支持, 比如kafka

## 消息正在积压
增加消费者

如果是带分区的, 就新建一批分区, 用一个新的临时consumer转发到新分区上提升并发度

## 消息开始过期
此时还会有一个问题, 积压足够久, 会达到ttl,导致消息直接丢失

此处需要从日志中把丢失的数据重新取出来重放, 在系统负载低的时候

## 队列快满了, 再写就写不进了
- 立马提升并发度加速消费
- 还是消费不掉, 紧急上策略, 抛弃部分数据到log里, 等负载低的时候重放
- 或者放死信队列中
# 生产端手段
- 限流, 减少生产
- back-pressure, 不准生产


# 注意

上面有个重复的地方: 拓展消费者
我们提到了:
- 水平拓展
- 分区+快速消费者转发新分区
这是因为在kafka中, 分区数决定了并发度
所以要水平拓展kafka往往要用一个转发消费者从原来的分区转发数据到新分区里面去
