DI是一种软件设计模式, 旨在实现IoC, 从而减少组件之间的耦合
## 概念
对于一个a依赖b, b依赖c的程序:
### 0.dependency inversion principle : 依赖
对于任何一个依赖关系a和b, 最朴素的依赖关系是, a直接依赖b的具体实现, 是强耦合.
依赖倒置就是, a还是依赖一个接口, 但是这个接口并不依赖b的实现, 而是b要去根据接口实现, 让这里倒置, 从而解除了**依赖对象使用**时的耦合.
![[Pasted image 20240522141453.png]]
### 1.inversion of control : 控制
控制反转建立在DIP之上, 当abc之间遵循了DIP, 就有了控制反转的基础.
- 直觉上, a应该控制一个b, b中控制一个c, 由于c的实际创建是在a的内部, 所以c的变动要知会ab, 所以**依赖对象创建**上还是强耦合
- 为了解除耦合，a还是被main控制，但是b和c也都直接反转到main上.
其本质是避免了长的依赖链, 让系统无法维护, 显然, IoC完全基于DIP.
![[Pasted image 20240522141503.png]]
### 2. dependency injection 模式
DI是IoC的一种实现.
- 使用一个IoC容器作为main, a的创建与使用都在main中, 同时, bc也是.
	- 创建a时, 容器创建b, 将b作为参数注入a
	- 当修改c时, 只要创建一个不同的c, 注入过程不变
### 3.和工厂模式的区别
工厂主要是分离创建和使用, 可以视为一种*依赖查找*思路, 他还是a去找工厂创建一个a控制的b, 还是耦合度太高.
 - 他是解决创建和使用耦合的， 不是处理依赖耦合的
 - 你可以在ioc容器中使用工厂模式分离a的依赖b的创建和使用