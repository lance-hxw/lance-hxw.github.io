从7.3开始支持向量检索的dense_vector类型，7.7+有了近似knn功能

# 创建支持knn的索引mapping
```json
PUT semantic-index
{
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "properties": {
      "id": { "type": "long" },
      "vector": {
        "type": "dense_vector",
        "dims": 384,
        "index": true,                  // 开启向量索引
        "similarity": "cosine"          // 常用语义检索相似度
      }
    }
  }
}


```


# 写数据

```go
import (
    "encoding/json"
    "github.com/elastic/go-elasticsearch/v8"
    "strings"
)

type Doc struct {
    ID     int       `json:"id"`
    Vector []float32 `json:"vector"`
}

func main() {
    es, _ := elasticsearch.NewDefaultClient()
    doc := Doc{
        ID:     1,
        Vector: make([]float32, 384), // 这里写你真实的向量
    }
    // 假设你的向量已经赋值

    data, _ := json.Marshal(doc)
    es.Index(
        "semantic-index",
        strings.NewReader(string(data)),
        es.Index.WithRefresh("true"),
    )
}

```

# 查询

## KNN

```js
POST semantic-index/_search
{
  "size": 3,
  "knn": {
    "field": "vector",
    "query_vector": [0.1, 0.2, ...],    // 你的384维查询向量
    "k": 3,
    "num_candidates": 100
  }
}

```
## Scrpit Score（混合·