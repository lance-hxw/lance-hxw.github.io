##  字节为单位的滑动窗口

根据B的窗口值，建立窗口，在未收到确认前发送所有数据，未确认前都要备份

描述一个窗口需要三个指针

若发送窗口全发完还没有确认，A停止发送。

B接受到不按顺序的字节，就先缓存

A的缓存：未发，等待重发
B的缓存：按序收到，但程序未读；无序数据，等待

- AB的窗口不一定相同
- 不按序到达，临时存
- 累积确认
- 全双工！

## 超时重传时间选择


TCP连接可靠性是TCP协议最重要的特性之一。作为传输控制协议(Transmission Control Protocol)，TCP通过多种机制确保数据能够可靠地从发送方传输到接收方。以下是TCP连接可靠性的主要特点和实现机制：

### TCP可靠性的核心机制

1. **序列号和确认应答**
    - 每个TCP段都有序列号
    - 接收方通过发送确认(ACK)来通知发送方数据已成功接收
    - 只有收到确认后，发送方才认为数据传输成功
2. **超时重传**
    - 发送方在发送数据后启动计时器
    - 如果在预定时间内未收到确认，则假定数据包丢失，自动重传
3. **校验和**
    - 每个TCP段都包含校验和字段
    - 用于检测传输过程中数据是否被损坏
    - 如果校验和不匹配，接收方会丢弃该数据包，导致发送方最终重传
4. **流量控制**
    - 通过滑动窗口机制实现
    - 接收方告知发送方自己的接收窗口大小
    - 防止发送方发送过多数据导致接收方缓冲区溢出
5. **拥塞控制**
    - 慢启动、拥塞避免、快速重传和快速恢复算法
    - 动态调整发送速率，避免网络拥塞
    - 当检测到网络拥塞时，减少数据发送量
6. **三次握手建立连接**
    - 确保双方都已准备好收发数据
    - 同步双方的初始序列号
    - 避免历史连接的干扰
7. **四次挥手关闭连接**
    - 确保双方数据都已完整传输
    - 优雅地终止连接，避免数据丢失
8. **有序数据传输**
    - 即使数据包乱序到达，TCP也能重新排序
    - 确保应用层接收到的数据顺序与发送顺序一致
