udp报文格式为；
源端口，目标端口
报文长度，校验和
数据
可见，没有诸如控制位，窗口等信息
# UDP和TCP的区别
UDP无连接， 数据可能会乱序，丢失，重复
UDP用于速度要求高，可以容忍数据丢失的场景，如QQ聊天，在线视频，电话，广播，游戏等
UDP还有一个显著的优点是对服务器的压力比较小
UDP的不可靠性需要特殊的传输协议才能完成传输控制
# QQ与UDP：UDP为主
首先如果是文件等东西的传输肯定是走tcp的
视频和语音显然是走udp的，可以容忍一定的丢包
主要使用udp主要是用户太多了，用tcp占用的资源实在太大


# DNS与UDP

DNS在进行区域传送的时候，使用tcp保证消息到达，因为数据量大
- tcp的头部相较于数据量比较小，开支可以接受
- tcp允许的报文长度更大
- tcp连接可靠，数据正确性比较重要
当client去查dns记录的时候，就使用udp，返回的数据一般比较小，不会超过udp运行的报文长度，不会拆包，且响应速度快。
但是还是需要解析服务器和域名服务器都自己处理超时和重传保证一定的可靠性

# UDP可靠性
## 为什么不可靠
- 不保证消息交付：没有确认，没有重传，没有超时
- 不保证顺序：没有包序列号
- 无连接状态
- 没有拥塞控制
## 如何打补丁解决可靠性问题：在应用层
- 序列号和ack机制：在应用层
	- 发送方在包内分配序列号，
	- 接收方受到数据后主动发送ack包确认受到特定序列号
- 重传机制：
	- 超时重传，没有ack就发送
- 校验ack，应用层进一步校验
- 前向纠错FEC，发送冗余数据包，丢失少量数据也能复原，用于实时性高且允许少量丢包的场景
- **心跳，用心跳包模拟连接控制**

# HTTP3与QUIC
谷歌开发的一个传输层协议
其实现为：
- 基于udp， 快
- 加入可靠传输机制
其特点为：
- 快速连接建立，0-RTT连接，可以直接发送数据，不需要等待server响应
- 多路复用，没有队头阻塞
- 使用tls1.3
- 带有拥塞控制，使用BBR之类的算法，优化网络性能
- 支持连接迁移