# 分类IP地址形式

点分十进制，32位的ip地址，前n位为网络号，后面为主机号

## 分类的IP地址

A：n=8
B: n=16
C: n=24

此三类为单播地址

D为多播地址

E为保留地址

其中 起始为0 是A类，10为B类，110为C类，1110 为D类，1111为E

有效网络号和主机号一起编码一个地址

### A类地址

除第一位0外，7可用位网络号

- 全0的网络号表示本网络。
- 127 即0111 1111保留为环回测试
- 故有126个网络号

主机号三个字节

- 全0为本机地址
- 全1为全部主机地址
- 故要减去两个可用主机号

### 其他地址

有效网络号都是网络号位数减去头

有效地址数减去2

## 无分类编址CIDR

构造超网

无分类域间路由选择

由于没有分类IP地址的前缀类型码，不带前缀位数的IP地址无法正常识别。

### 网络前缀

由前缀和后缀组成，后缀为主机号

前缀的位数不定。

### 斜线记法

即由一个ip地址，斜线和位数组成，位数指出前缀（网络号）的位数。

### 地址块

前缀相同的所有地址在一个地址块内，有效主机号要减去2,

### 地址掩码（子网掩码）

计算机读取前缀长度的方法，使用一串1,然后接着一串0组成，1的个数即是前缀长度。

子网掩码也可以用斜线法表示出来，但没有什么意义。

分类IP格式可以对应相应的子网掩码，如8位，16位，24位个1。

计算机计算时，将IP地址和子网掩码进行按位与即可得出网络地址，剩余0位即为主机码。

### 特殊的地址块

- n=32： 主机路由，没有主机号
- n=31:  块中只有两个IP地址，用于点对点链路
- n=0 ，同时IP地址全0： 0.0.0.0/0 默认路由

### 路由聚合

一个大地址块包含多个小地址块，故可以在路由转发表中直接用大的地址块，压缩了转发表，减少了查表时间。


### 注意

前缀越短，地址块内的地址越多。


## IP地址的特点

### 由两部分构成

- 分（两个）等级的地址结构
- 分配地址时，IP地址管理机构只用将网络号分配给单位，主机号由单位自行分配。
- 路由转发时，只用根据网络前缀进行转发，减少了表的存储开销和查表开销。

### 是网络的接口

他标志一台主机和一条链路的接口，当一台主机需要连接两个网络时，就需要两个IP地址。

此时其前缀必然不同，这称为多归属主机。

特别的，路由器必然至少两个Ip地址。

### 局域网

网络是所有具有相同网络前缀的主机的集合，故用转发器和交换机连接的若干局域网仍然是一个网络，因为有相同的网络前缀。

不同的网络相连必须要经过路由器互联。

### 平等

不同大小的地址块对应的网络是平等的，即小局域网和极大的网络也是平等的。

## 注意

- 以太网交换机是链路层设备，只有MAC地址，没有IP地址
- 主机和路由器才有IP地址。
- 交换机在链路层，他连接的网络是同一个网络
- 两个直连的路由器，在这条网络上，可以不分配地址；也可以分配一个点对点的，只有1位主机号的地址。



## 特殊的IP地址

0.0.0.0 ： 本机，默认路由，只可作源地址
网络号为0： 主机地址，只可为源
255.255.255.255： 有限广播地址，只可用作目的地址，此时主机不知道自己的网络号，故用此受限广播地址获取网络号
主机号全1：对此网络广播，直接广播，只可作目的地址
127.0.0.1~127.255.255.254：环回测试
