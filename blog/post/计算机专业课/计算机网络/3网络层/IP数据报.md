# IP数据报首部固定字段20B，160bit

## 版本 4bit 

协议IP的版本

## 首部长度 4bit 

4位表示的最大值为15，这里 “ 1 ”代表32位，即4B，由于首部的固定长度有20字节，这个长度至少为5，即0101

- 最长就是15，即60B的首部，但一般只用20B，连可选的也不用
- 首部长度必须是4B的整数倍，用不完的填充

## 区分服务 8bit 

以前是服务类型，没用过，后改为区分服务。只有使用此服务时才有用，一般不用。

## 总长度 16bit 

指首部和数据之和的长度

- 链路层规定有MTU，故：
    - 长的数据报传输效率高但太长可能分片，转发慢
    - 分片后，数据报首部的总长度是分片 中 首部和数据的长度和

## 标识 16bit

每产生一个数据报就给计数器加1，并赋值给此字段

- 不是序号，IP无连接服务，不需要按顺序接受

在分片后，这个值被复制到每个分片中，可用于重装数据报

## 标志 3bit 

只有两位有意义，
- 低位为MF，1是：还有分片在后面，0是没有分片，此位标志是否有更多分片
- 中位位DF，意思是不能分片，0才能分片

## 片偏移 13bit

指出，长分组在分片后，片在分组中的相对位置即，相对于用户字段的起点。这片从何处开始。

片偏移的单位是8B，故除了最后一个数据报片外，中间每个分片长度必须是8B的整数倍。

## 生存时间 8bit

TTL 到0丢弃，按hop减少，每次转发就减掉1，最大255

## 协议 8bit

指出数据的协议

如TCP 6，UDP 17 ICMP 1 IGMP 2

## 首部校验和 16bit

检验首部，不检验数据部分

## 源地址 32bit

## 目标地址 32bit
