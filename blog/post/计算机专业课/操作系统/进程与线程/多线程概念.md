# 执行流
linux中，用Task表示一个执行流
一个任务里被依次执行的指令会形成一个指令序列（IP寄存器值的历史记录）
这个指令序列就是一个指令流
每个线程有自己的执行流
一个线程中，执行一个语句，会依次执行若干机器指令，但是实际执行中，这些指令顺序和代码不一致

# 逻辑线程与硬件线程
逻辑线程，即任务，软线程，逻辑线程。实现为一个函数，他可以被另一个线程同步调用，也可以作为线程的入口函数。他描述的是逻辑。

硬件线程，是实际执行逻辑的物质基础，是一组硬件单元。一个线程只需要关注逻辑cpu核心，且其调度和分配是OS决定，与程序无关。

# 线程，核心和函数
逻辑，拆分
# 进程，线程，协程
进程是一个动态的概念，是一个可执行程序的执行，是资源分配的基本单位
多个线程代表了一个进程中的多个执行流，是cpu调度单位。
进程是通过共享存储空间而体现的一个逻辑概念，进程中的多个线程共享地址空间和文件描述符，即所有代码，全局变量和堆栈都被共享。
协程，是完全在用户态的多执行流，更低的上下文切换成本。
## 线程和进程的关系：linux
linux的设计逻辑中，线程和进程都是context of execution,没有本质区别
他们都有状态：
- cpu状态
- MMU状态（页映射）
- 权限状态（uid,gid
- 通讯状态（打开的文件和信号处理器）

实际实现上，Linux的线程是LWP实现，线程就是轻量级线程，所有线程都当作进程实现
- 结合了用户态线程和内核态线程，用户管理生命周期，但是内核进行调度

# 线程安全函数
有很多方法需要操作固定静态/本地数据，所以是线程不安全的
想要线程安全，一般至少要有独立的数据（如传入指针进行数据共享，而不是静态变量）
对于同一资源的共享，需要锁等同步机制
# 线程私有数据
即ThreadLocal