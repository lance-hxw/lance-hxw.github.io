分布式数据系统中, 最常见的就是"故障"
- 系统故障
- 应用故障
- 网络故障
- 并发写入
- 半读, 读写并发

为了实现安全的数据系统, 为了解决这些问题, 必然会产生复杂度, 如果数据库不处理, 那就要去应用层, 网络层, 系统, 客户端上去处理.
- 网络层, 系统, 客户端上基本处理不了, 最后变成应用层处理, 这很难
- 最终变成, 数据库不处理就没人愿意用

数据库为了解决各类故障, 给出了事务支持, 可以简化应用层

简单来说, 事务就是, 将一组操作打包成一个逻辑单元, 并保证: 要么全部成功, commit, 要么全部失败, abort或者主动rollback, 即原子性
同时还允许: 用户在隔离性和性能间进行选择

即事务主要包括两个点:
- 生命周期上: 保证一组操作完整性
- 并发控制上: 做好多个事务间的并发控制

其本质上是: **将并发问题和软硬件故障抽象, 将其简化为事务的终止**, 那么业务代码只要处理事务终止就行了

实现事务后, 应用层可以方便地重试, 但是性能和可用性会下降(特别是分布式事务)

事务支持在关系型数据库中已经较为成熟了

但是在分布式数据库或者nosql中, 事务受到很大冲击, nosql普遍放弃了完整的事务支持
- 但是他们会重新定义事务然后说自己支持事务

随即出现两种观点:
- 事务和分布式难以兼容, 分布式, 高性能/高可用, 事务不可能三角
- 分布式必须用事务, 不然就不安全
其实二者是一致的, 即分布式事务带来的性能问题


本章将先探讨基本概念, 然后介绍隔离级别, 并讨论事务支持和分布式的冲突
